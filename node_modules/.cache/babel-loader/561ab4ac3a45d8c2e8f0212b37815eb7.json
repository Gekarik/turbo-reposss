{"ast":null,"code":"import _regeneratorRuntime from\"D:/git_huita/notes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/git_huita/notes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"D:/git_huita/notes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"D:/git_huita/notes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import React,{useState,useEffect}from\"react\";import cl from\"./EditKeep.module.css\";import{Button,FormGroup,InputGroup,Slider,Switch,Alert,Intent}from\"@blueprintjs/core\";import AppToaster from\"../../common/app-toaster/AppToaster\";import{Form,Field}from\"react-final-form\";import{changeKeep}from\"../../../api/keep\";var EditKeep=function EditKeep(_ref){var _ref$onSuccess=_ref.onSuccess,onSuccess=_ref$onSuccess===void 0?function(){}:_ref$onSuccess,_ref$onCancel=_ref.onCancel,onCancel=_ref$onCancel===void 0?function(){}:_ref$onCancel,_ref$onDelete=_ref.onDelete,onDelete=_ref$onDelete===void 0?function(){}:_ref$onDelete,keep=_ref.keep;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoader=_useState2[0],setIsLoader=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isOpenAlert=_useState4[0],setIsOpenAlert=_useState4[1];var _useState5=useState(_objectSpread(_objectSpread({},keep),{},{title:keep.title,text:keep.text,color_background:keep.color_background,color:keep.color})),_useState6=_slicedToArray(_useState5,2),value=_useState6[0],setvalue=_useState6[1];var onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(values){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return changeKeep(values);case 3:_context.next=8;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 8:onSuccess();case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,5]]);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();var handleCancel=function handleCancel(){onCancel();};var loadvalueTopic=function loadvalueTopic(){setIsLoader(true);try{//api\nsetIsLoader(false);}catch(error){setIsLoader(false);}};var handleDeleteKeep=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0://api\nonDelete(keep.id);setIsOpenAlert(false);AppToaster.show({message:\"\\u0414\\u0430\\u043D\\u043D\\u0430\\u044F \\u0437\\u0430\\u043C\\u0435\\u0442\\u043A\\u0430 \\u0443\\u0434\\u0430\\u043B\\u0435\\u043D\\u0430\"});// onCancel();\ncase 3:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDeleteKeep(){return _ref3.apply(this,arguments);};}();var handleAlertOpen=function handleAlertOpen(){setIsOpenAlert(true);};var handleAlertCancel=function handleAlertCancel(){setIsOpenAlert(false);};useEffect(function(){loadvalueTopic();},[]);if(isLoader){/*#__PURE__*/_jsx(Slider,{intent:\"primary\",size:\"200\"});}return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(Form,{onSubmit:onSubmit,initialValues:value,render:function render(_ref4){var handleSubmit=_ref4.handleSubmit;return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(Field,{name:\"title\",children:function children(_ref5){var input=_ref5.input;return/*#__PURE__*/_jsx(FormGroup,{label:\"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A:\",children:/*#__PURE__*/_jsx(InputGroup,_objectSpread(_objectSpread({},input),{},{placeholder:\"\\u0417\\u0430\\u0433\\u043E\\u043B\\u043E\\u0432\\u043E\\u043A\"}))});}}),/*#__PURE__*/_jsx(Field,{name:\"text\",children:function children(_ref6){var input=_ref6.input;return/*#__PURE__*/_jsx(FormGroup,{label:\"\\u0422\\u0435\\u043A\\u0441\\u0442:\",children:/*#__PURE__*/_jsx(InputGroup,_objectSpread(_objectSpread({},input),{},{placeholder:\"\\u0422\\u0435\\u043A\\u0441\\u0442\"}))});}}),/*#__PURE__*/_jsx(\"label\",{name:\"color_background\",children:\"\\u0426\\u0432\\u0435\\u0442 \\u0444\\u043E\\u043D\\u0430: \"}),/*#__PURE__*/_jsxs(Field,{style:{width:120},name:\"color_background\",component:\"select\",children:[/*#__PURE__*/_jsx(\"option\",{}),/*#__PURE__*/_jsx(\"option\",{style:{backgroundColor:\"black\"},value:\"black_back\"}),/*#__PURE__*/_jsx(\"option\",{style:{backgroundColor:\"red\"},value:\"red_back\"}),/*#__PURE__*/_jsx(\"option\",{style:{backgroundColor:\"blue\"},value:\"blue_back\"}),/*#__PURE__*/_jsx(\"option\",{style:{backgroundColor:\"green\"},value:\"green_back\"})]}),/*#__PURE__*/_jsx(\"label\",{name:\"color\",children:\"\\u0426\\u0432\\u0435\\u0442 \\u0442\\u0435\\u043A\\u0441\\u0442\\u0430: \"}),/*#__PURE__*/_jsxs(Field,{name:\"color\",component:\"select\",style:{width:120},children:[/*#__PURE__*/_jsx(\"option\",{}),/*#__PURE__*/_jsx(\"option\",{style:{backgroundColor:\"black\"},value:\"black\"}),/*#__PURE__*/_jsx(\"option\",{style:{backgroundColor:\"red\"},value:\"red\"}),/*#__PURE__*/_jsx(\"option\",{style:{backgroundColor:\"blue\"},value:\"blue\"}),/*#__PURE__*/_jsx(\"option\",{style:{backgroundColor:\"green\"},value:\"green\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:cl.buttons,children:[/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:handleAlertOpen,intent:\"danger\",children:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Alert,{cancelButtonText:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0430\",confirmButtonText:\"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\",icon:\"trash\",intent:Intent.DANGER,isOpen:isOpenAlert,onCancel:handleAlertCancel,onConfirm:handleDeleteKeep,children:/*#__PURE__*/_jsx(\"p\",{children:\"\\u0412\\u044B \\u0434\\u0435\\u0439\\u0441\\u0442\\u0432\\u0438\\u0442\\u0435\\u043B\\u044C\\u043D\\u043E \\u0445\\u043E\\u0442\\u0438\\u0442\\u0435 \\u0443\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C \\u0434\\u0430\\u043D\\u043D\\u0443\\u044E \\u0437\\u0430\\u043C\\u0435\\u0442\\u043A\\u0443?\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Button,{type:\"button\",onClick:handleCancel,children:\"\\u041E\\u0442\\u043C\\u0435\\u043D\\u0438\\u0442\\u044C\"}),/*#__PURE__*/_jsx(Button,{className:cl.buttonAdd,type:\"submit\",intent:\"primary\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]})]})]});}})});};export default EditKeep;","map":{"version":3,"sources":["D:/git_huita/notes/src/components/forms/edit-keep/EditKeep.jsx"],"names":["React","useState","useEffect","cl","Button","FormGroup","InputGroup","Slider","Switch","Alert","Intent","AppToaster","Form","Field","changeKeep","EditKeep","onSuccess","onCancel","onDelete","keep","isLoader","setIsLoader","isOpenAlert","setIsOpenAlert","title","text","color_background","color","value","setvalue","onSubmit","values","console","log","handleCancel","loadvalueTopic","error","handleDeleteKeep","id","show","message","handleAlertOpen","handleAlertCancel","handleSubmit","input","width","backgroundColor","buttons","DANGER","buttonAdd"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport cl from \"./EditKeep.module.css\";\r\nimport {\r\n  Button,\r\n  FormGroup,\r\n  InputGroup,\r\n  Slider,\r\n  Switch,\r\n  Alert,\r\n  Intent,\r\n} from \"@blueprintjs/core\";\r\nimport AppToaster from \"../../common/app-toaster/AppToaster\";\r\nimport { Form, Field } from \"react-final-form\";\r\nimport { changeKeep } from \"../../../api/keep\";\r\n\r\nconst EditKeep = ({\r\n  onSuccess = () => {},\r\n  onCancel = () => {},\r\n  onDelete = () => {},\r\n  keep,\r\n}) => {\r\n  const [isLoader, setIsLoader] = useState(false);\r\n  const [isOpenAlert, setIsOpenAlert] = useState(false);\r\n  const [value, setvalue] = useState({\r\n    ...keep,\r\n    title: keep.title,\r\n    text: keep.text,\r\n    color_background: keep.color_background,\r\n    color: keep.color,\r\n  });\r\n  const onSubmit = async (values) => {\r\n    try {\r\n      await changeKeep(values);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n    onSuccess();\r\n  };\r\n\r\n  const handleCancel = () => {\r\n    onCancel();\r\n  };\r\n\r\n  const loadvalueTopic = () => {\r\n    setIsLoader(true);\r\n    try {\r\n      //api\r\n      setIsLoader(false);\r\n    } catch (error) {\r\n      setIsLoader(false);\r\n    }\r\n  };\r\n\r\n  const handleDeleteKeep = async () => {\r\n    //api\r\n    onDelete(keep.id);\r\n    setIsOpenAlert(false);\r\n    AppToaster.show({\r\n      message: `Данная заметка удалена`,\r\n    });\r\n    // onCancel();\r\n  };\r\n\r\n  const handleAlertOpen = () => {\r\n    setIsOpenAlert(true);\r\n  };\r\n\r\n  const handleAlertCancel = () => {\r\n    setIsOpenAlert(false);\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadvalueTopic();\r\n  }, []);\r\n\r\n  if (isLoader) {\r\n    <Slider intent=\"primary\" size=\"200\" />;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Form\r\n        onSubmit={onSubmit}\r\n        initialValues={value}\r\n        render={({ handleSubmit }) => (\r\n          <form onSubmit={handleSubmit}>\r\n            <Field name=\"title\">\r\n              {({ input }) => (\r\n                <FormGroup label=\"Заголовок:\">\r\n                  <InputGroup {...input} placeholder=\"Заголовок\" />\r\n                </FormGroup>\r\n              )}\r\n            </Field>\r\n            <Field name=\"text\">\r\n              {({ input }) => (\r\n                <FormGroup label=\"Текст:\">\r\n                  <InputGroup {...input} placeholder=\"Текст\" />\r\n                </FormGroup>\r\n              )}\r\n            </Field>\r\n            <label name=\"color_background\">Цвет фона: </label>\r\n            <Field\r\n              style={{ width: 120 }}\r\n              name=\"color_background\"\r\n              component=\"select\"\r\n            >\r\n              <option />\r\n              <option\r\n                style={{ backgroundColor: \"black\" }}\r\n                value=\"black_back\"\r\n              ></option>\r\n              <option\r\n                style={{ backgroundColor: \"red\" }}\r\n                value=\"red_back\"\r\n              ></option>\r\n              <option\r\n                style={{ backgroundColor: \"blue\" }}\r\n                value=\"blue_back\"\r\n              ></option>\r\n              <option\r\n                style={{ backgroundColor: \"green\" }}\r\n                value=\"green_back\"\r\n              ></option>\r\n            </Field>\r\n\r\n            <label name=\"color\">Цвет текста: </label>\r\n            <Field name=\"color\" component=\"select\" style={{ width: 120 }}>\r\n              <option />\r\n              <option\r\n                style={{ backgroundColor: \"black\" }}\r\n                value=\"black\"\r\n              ></option>\r\n              <option style={{ backgroundColor: \"red\" }} value=\"red\"></option>\r\n              <option style={{ backgroundColor: \"blue\" }} value=\"blue\"></option>\r\n              <option\r\n                style={{ backgroundColor: \"green\" }}\r\n                value=\"green\"\r\n              ></option>\r\n            </Field>\r\n\r\n            <div className={cl.buttons}>\r\n              <Button type=\"button\" onClick={handleAlertOpen} intent=\"danger\">\r\n                Удалить\r\n              </Button>\r\n              <Alert\r\n                cancelButtonText=\"Отмена\"\r\n                confirmButtonText=\"Удалить\"\r\n                icon=\"trash\"\r\n                intent={Intent.DANGER}\r\n                isOpen={isOpenAlert}\r\n                onCancel={handleAlertCancel}\r\n                onConfirm={handleDeleteKeep}\r\n              >\r\n                <p>Вы действительно хотите удалить данную заметку?</p>\r\n              </Alert>\r\n              <div>\r\n                <Button type=\"button\" onClick={handleCancel}>\r\n                  Отменить\r\n                </Button>\r\n                <Button className={cl.buttonAdd} type=\"submit\" intent=\"primary\">\r\n                  Сохранить\r\n                </Button>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        )}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditKeep;\r\n"]},"metadata":{},"sourceType":"module"}