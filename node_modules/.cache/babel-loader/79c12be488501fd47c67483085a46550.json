{"ast":null,"code":"import _objectSpread from\"D:/git_huita/notes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"D:/git_huita/notes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"D:/git_huita/notes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/git_huita/notes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/git_huita/notes/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useCallback,useEffect,useState}from\"react\";import st from\"./KeepPage.module.css\";import Keep from\"./../../components/keep/Keep\";import Wrap from\"../../components/wrapper/Wrap\";import{Button}from\"@blueprintjs/core\";import ButtonWithModal from\"../../components/common/button-with-modal/ButtonWithModal\";import AddKeep from\"../../components/forms/add-keep/AddKeep\";import{getKeep,addKeep,removeKeep}from\"../../api/keep\";var KeepPage=function KeepPage(){var _useState=useState([{id:1,idUser:1,type:\"buy\",title:\"Покупки\",text:\"Купить батон и соль\",color_background:\"blue_back\",color:\"red\"},{id:2,idUser:2,type:\"buy\",title:\"Дела\",text:\"Убрать в комнате, при этом все вещи надо перебрать\",color_background:\"green_back\",color:\"blue\"},{id:3,idUser:1,type:\"buy\",title:\"Книги\",text:\"Прочитать: Слимпер, Технотьма, LearnJS, React для чайников\",color_background:\"white_back\",color:\"green\"}]),_useState2=_slicedToArray(_useState,2),keeps=_useState2[0],setKeeps=_useState2[1];var onDelete=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var res,filterKeep;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return removeKeep(id);case 3:res=_context.sent;filterKeep=keeps.filter(function(prev){return prev.id!==id;});setKeeps(filterKeep);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);console.log(_context.t0);case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[keeps]);var onCreate=useCallback(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return addKeep(value);case 3:setKeeps(function(prev){return[].concat(_toConsumableArray(prev),[value]);});_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);console.log(_context2.t0);case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function(_x2){return _ref2.apply(this,arguments);};}(),[]);var loadingKeep=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var res;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return getKeep();case 3:res=_context3.sent;setKeeps(function(prev){return[].concat(_toConsumableArray(prev),[res.data]);});_context3.next=10;break;case 7:_context3.prev=7;_context3.t0=_context3[\"catch\"](0);console.log(_context3.t0);case 10:case\"end\":return _context3.stop();}}},_callee3,null,[[0,7]]);})),[]);useEffect(function(){loadingKeep();},[loadingKeep]);return/*#__PURE__*/_jsxs(Wrap,{className:st.container,children:[/*#__PURE__*/_jsx(\"div\",{className:st.title,children:\"\\u0412\\u0430\\u0448\\u0438 \\u0437\\u0430\\u043C\\u0435\\u0442\\u043A\\u0438: \"}),/*#__PURE__*/_jsx(\"div\",{className:st.keeps,children:keeps.length>0&&keeps.map(function(keep){return/*#__PURE__*/_jsx(Keep,{keep:keep,onDelete:onDelete});})}),/*#__PURE__*/_jsx(ButtonWithModal,{content:function content(_ref4){var closeModal=_ref4.closeModal;return/*#__PURE__*/_jsx(AddKeep,{onCreate:onCreate,onCancel:closeModal});},buttonRenderer:function buttonRenderer(buttonProps){return/*#__PURE__*/_jsx(Button,_objectSpread(_objectSpread({className:st.addKeep},buttonProps),{},{intent:\"danger\",children:\"+\"}));}})]});};export default KeepPage;","map":{"version":3,"sources":["D:/git_huita/notes/src/pages/keep-page/KeepPage.jsx"],"names":["React","useCallback","useEffect","useState","st","Keep","Wrap","Button","ButtonWithModal","AddKeep","getKeep","addKeep","removeKeep","KeepPage","id","idUser","type","title","text","color_background","color","keeps","setKeeps","onDelete","res","filterKeep","filter","prev","console","log","onCreate","value","loadingKeep","data","container","length","map","keep","closeModal","buttonProps"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from \"react\";\r\nimport st from \"./KeepPage.module.css\";\r\nimport Keep from \"./../../components/keep/Keep\";\r\nimport Wrap from \"../../components/wrapper/Wrap\";\r\nimport { Button } from \"@blueprintjs/core\";\r\nimport ButtonWithModal from \"../../components/common/button-with-modal/ButtonWithModal\";\r\nimport AddKeep from \"../../components/forms/add-keep/AddKeep\";\r\nimport { getKeep, addKeep, removeKeep } from \"../../api/keep\";\r\n\r\nconst KeepPage = () => {\r\n  const [keeps, setKeeps] = useState([\r\n    {\r\n      id: 1,\r\n      idUser: 1,\r\n      type: \"buy\",\r\n      title: \"Покупки\",\r\n      text: \"Купить батон и соль\",\r\n      color_background: \"blue_back\",\r\n      color: \"red\",\r\n    },\r\n    {\r\n      id: 2,\r\n      idUser: 2,\r\n      type: \"buy\",\r\n      title: \"Дела\",\r\n      text: \"Убрать в комнате, при этом все вещи надо перебрать\",\r\n      color_background: \"green_back\",\r\n      color: \"blue\",\r\n    },\r\n    {\r\n      id: 3,\r\n      idUser: 1,\r\n      type: \"buy\",\r\n      title: \"Книги\",\r\n      text: \"Прочитать: Слимпер, Технотьма, LearnJS, React для чайников\",\r\n      color_background: \"white_back\",\r\n      color: \"green\",\r\n    },\r\n  ]);\r\n\r\n  const onDelete = useCallback(\r\n    async (id) => {\r\n      try {\r\n        const res = await removeKeep(id);\r\n        const filterKeep = keeps.filter((prev) => prev.id !== id);\r\n        setKeeps(filterKeep);\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n    },\r\n    [keeps]\r\n  );\r\n\r\n  const onCreate = useCallback(async (value) => {\r\n    try {\r\n      await addKeep(value);\r\n      setKeeps((prev) => [...prev, value]);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, []);\r\n\r\n  const loadingKeep = useCallback(async () => {\r\n    try {\r\n      const res = await getKeep();\r\n      setKeeps((prev) => [...prev, res.data]);\r\n    } catch (error) {\r\n      console.log(error);\r\n    }\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    loadingKeep();\r\n  }, [loadingKeep]);\r\n\r\n  return (\r\n    <Wrap className={st.container}>\r\n      <div className={st.title}>Ваши заметки: </div>\r\n      <div className={st.keeps}>\r\n        {keeps.length > 0 &&\r\n          keeps.map((keep) => {\r\n            return <Keep keep={keep} onDelete={onDelete} />;\r\n          })}\r\n      </div>\r\n      <ButtonWithModal\r\n        content={({ closeModal }) => (\r\n          <AddKeep onCreate={onCreate} onCancel={closeModal} />\r\n        )}\r\n        buttonRenderer={(buttonProps) => (\r\n          <Button className={st.addKeep} {...buttonProps} intent=\"danger\">\r\n            +\r\n          </Button>\r\n        )}\r\n      />\r\n    </Wrap>\r\n  );\r\n};\r\n\r\nexport default KeepPage;\r\n"]},"metadata":{},"sourceType":"module"}